\documentclass[a4paper]{article}

\title{Formal Specification of\\the Plutus Core Language (version 3.0)}
\date{\today}
\author{Plutus Team}

\input{header.tex}

\begin{document}

\maketitle

\begin{center}
  \LARGE{\red{\textsf{DRAFT}}}
\end{center}

\begin{abstract}
  This is intended to be a reference guide for developers who want to utilise
  the Plutus Core infrastructure.  We lay out the grammar and syntax of untyped
  Plutus Core terms, and their semantics and evaluation rules.  We also describe
  the built-in types and functions.  Appendix~\ref{appendix:default-builtins-alonzo}
  includes a list of supported builtins in each era and the formally verified
  behaviour.

  This document only decribes untyped Plutus Core: a subsequent version will also
  include the syntax and semantics of Typed Plutus Core and describe its relation to
  untyped Plutus Core.
\end{abstract}

\newpage
\tableofcontents
\newpage

\kwxm{This is still pretty messy.  There's a horrible mixture of syntactic
  BNF-style notation, set-theoretic notation, and type theory.  It started off
  OK but then things got a bit out of hand when I added polymorphic built-in
  functions and type operators.  I haven't made any attempt to describe what's
  going on in the implementation of the built-in machinery: instead I've written
  something that I think covers everything that we actually do with the builtins
  at the moment.  I think that the machinery is expressive enough to implement
  some quite complicated things that we don't use at the moment, but trying to
  specify all of that would involve specifying large parts of the Haskell type
  system (with numerous extensions turned on), which is not going to happen.  If
  we decided to add built-in GADTs or something then I don't think the
  presentation here would be able to handle it.  }

\kwxm{ There was a suggestion that this should be a pure specification with as
  little commentary as possible, but that's definitely not the case at the
  moment because there's a large amount of complicated notation that would be
  difficult to understand if you didn't already know what was going on.  Perhaps
  we could relegate some of the exegesis to notes at the back if we want to make
  the main text less verbose.  }

\kwxm{There's probably also quite a bit of repetition, but I think it'll need
  new readers to spot that kind of thing.}

\input{introduction.tex}
\input{notation.tex}
\input{untyped-grammar.tex}
\input{builtins.tex}
\input{untyped-reduction.tex}  % Also inputs untyped-values.tex
\input{untyped-cek-machine.tex}
% \input{tplc.tex}
\section{Typed Plutus Core}
To follow.

\begin{appendices}
\input{builtins-alonzo.tex}
\input{formal-verification.tex}
\input{serialisation.tex}
\end{appendices}

\bibliographystyle{plainnat} %% ... or whatever
\bibliography{plutus-core-specification}

\end{document}
